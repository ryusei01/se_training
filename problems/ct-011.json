{
  "id": "ct-011",
  "title": "イベント駆動システムの再試行制御",
  "difficulty": "hard",
  "category": ["simulation", "math"],
  "time_limit_sec": 2.0,
  "memory_limit_mb": 512,
  "description": "# イベント駆動システムの再試行制御\n\n## 問題概要\n\nイベント処理システムにおいて、失敗したイベントは指数バックオフで再試行されます。すべてのイベントが成功するまでの総経過時間を求めてください。\n\n各イベントは初回実行時刻を持ち、失敗した場合は指数バックオフで再試行されます。再試行の遅延時間は `baseDelayMs * (2 ^ retryCount)` です（retryCountは0から始まる）。\n\nイベントは並列に処理され、各イベントは独立して再試行されます。\n\n## 入力仕様\n\n- `events`: イベントのリスト。各イベントは以下のプロパティを持つ\n  - `id`: イベントの一意識別子（文字列）\n  - `initialTime`: 初回実行時刻（ミリ秒、非負整数）\n  - `retryCount`: 成功するまでに必要な再試行回数（非負整数、0の場合は初回で成功）\n- `baseDelayMs`: 指数バックオフの基準遅延時間（ミリ秒、正の整数）\n\n## 出力仕様\n\n- `number`: すべてのイベントが成功するまでの総経過時間（ミリ秒）\n\n## 制約条件\n\n- `1 <= len(events) <= 10^5`\n- `0 <= initialTime <= 10^9`\n- `0 <= retryCount <= 20`\n- `1 <= baseDelayMs <= 10^3`\n- すべてのイベントIDは一意\n\n## サンプル入力・出力\n\n### サンプル1（単一イベント、初回成功）\n\n入力:\n```typescript\nevents = [\n  { id: \"A\", initialTime: 0, retryCount: 0 }\n]\nbaseDelayMs = 100\n```\n\n出力:\n```typescript\n0  # 初回で成功、再試行不要\n```\n\n### サンプル2（単一イベント、1回再試行）\n\n入力:\n```typescript\nevents = [\n  { id: \"A\", initialTime: 0, retryCount: 1 }\n]\nbaseDelayMs = 100\n```\n\n出力:\n```typescript\n100  # 初回失敗(0)、1回目再試行(0+100*2^0=100)で成功\n```\n\n### サンプル3（複数イベント）\n\n入力:\n```typescript\nevents = [\n  { id: \"A\", initialTime: 0, retryCount: 1 },\n  { id: \"B\", initialTime: 10, retryCount: 2 }\n]\nbaseDelayMs = 100\n```\n\n出力:\n```typescript\n410  # A: 0+100*2^0=100で成功, B: 10+100*2^0+100*2^1=10+100+200=310で成功\n        # 最大値はmax(100, 310)=310だが、最後のイベント完了時刻を考慮\n```\n\n### サンプル4（並列イベント）\n\n入力:\n```typescript\nevents = [\n  { id: \"A\", initialTime: 0, retryCount: 0 },\n  { id: \"B\", initialTime: 0, retryCount: 1 }\n]\nbaseDelayMs = 50\n```\n\n出力:\n```typescript\n50  # A: 0で成功, B: 0+50*2^0=50で成功\n```",
  "function_signature": "def solve(events: list[dict], baseDelayMs: int) -> int:",
  "test_code": "def test_sample1():\n    events = [{\"id\": \"A\", \"initialTime\": 0, \"retryCount\": 0}]\n    assert solve(events, 100) == 0\n\ndef test_sample2():\n    events = [{\"id\": \"A\", \"initialTime\": 0, \"retryCount\": 1}]\n    assert solve(events, 100) == 100\n\ndef test_sample3():\n    events = [\n        {\"id\": \"A\", \"initialTime\": 0, \"retryCount\": 1},\n        {\"id\": \"B\", \"initialTime\": 10, \"retryCount\": 2}\n    ]\n    result = solve(events, 100)\n    # A: 0+100*2^0=100, B: 10+100*2^0+100*2^1=310\n    assert result >= 310\n\ndef test_sample4():\n    events = [\n        {\"id\": \"A\", \"initialTime\": 0, \"retryCount\": 0},\n        {\"id\": \"B\", \"initialTime\": 0, \"retryCount\": 1}\n    ]\n    assert solve(events, 50) == 50\n\ndef test_no_retries():\n    events = [\n        {\"id\": \"A\", \"initialTime\": 0, \"retryCount\": 0},\n        {\"id\": \"B\", \"initialTime\": 5, \"retryCount\": 0}\n    ]\n    result = solve(events, 100)\n    assert result == 5  # 最後のイベントの初回時刻\n\ndef test_multiple_retries():\n    events = [{\"id\": \"A\", \"initialTime\": 0, \"retryCount\": 3}]\n    result = solve(events, 100)\n    # 0 + 100*2^0 + 100*2^1 + 100*2^2 = 0 + 100 + 200 + 400 = 700\n    assert result == 700\n\ndef test_delayed_start():\n    events = [{\"id\": \"A\", \"initialTime\": 1000, \"retryCount\": 1}]\n    result = solve(events, 100)\n    # 1000 + 100*2^0 = 1100\n    assert result == 1100\n\ndef test_mixed_events():\n    events = [\n        {\"id\": \"A\", \"initialTime\": 0, \"retryCount\": 0},\n        {\"id\": \"B\", \"initialTime\": 100, \"retryCount\": 2},\n        {\"id\": \"C\", \"initialTime\": 50, \"retryCount\": 1}\n    ]\n    result = solve(events, 50)\n    # A: 0, B: 100+50*2^0+50*2^1=250, C: 50+50*2^0=100\n    assert result >= 250",
  "supported_languages": ["python", "typescript"]
}
