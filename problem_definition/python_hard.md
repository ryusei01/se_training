コーディングテスト テストケース設計（Hard / 120 分想定）
共通方針（全問題共通）

公開テスト：仕様理解・基本動作確認

非公開テスト：計算量・境界条件・罠

正解条件：

出力値が完全一致

例外・タイムアウトなし

不正解条件：

一部テスト失敗

実行時間超過

想定外例外

問題 1：依存関係を持つタスクの最短完了時間
テスト観点

DAG の正しい処理

並列実行の考慮

最長パス計算

大規模入力耐性

公開テストケース
TC1-1：最小ケース
n = 1
durations = [5]
dependencies = []
期待値: 5

TC1-2：直列依存
durations = [2, 3, 4]
dependencies = [(0,1),(1,2)]
期待値: 9

TC1-3：完全並列
durations = [3,5,7]
dependencies = []
期待値: 7

TC1-4：合流パターン
durations = [3,2,5]
dependencies = [(0,2),(1,2)]
期待値: 8

非公開テストケース
TC1-H1：深い依存チェーン

n = 100000

依存は一本鎖

期待：線形処理で完走

TC1-H2：星型依存

1 タスクに 99999 タスクが依存

並列計算を正しく処理できるか

TC1-H3：ランダム DAG

辺数 ≒ 2×10^5

メモリ・時間制約チェック

問題 2：ログから API 障害区間を特定せよ
テスト観点

スライディングウィンドウ

エラー率計算

区間マージ

浮動小数点誤差

公開テストケース
TC2-1：ログなし
logs = []
期待値: []

TC2-2：常に正常
全 status_code < 500
期待値: []

TC2-3：単一障害区間
window_sec = 60
error_threshold = 0.5
期待値: [(t1, t2)]

非公開テストケース
TC2-H1：境界ギリギリ

エラー率 = threshold ちょうど

「超えた場合のみ」を正しく判定できるか

TC2-H2：連続障害区間

隣接・重複区間が発生

正しくマージされるか

TC2-H3：大量ログ

2×10^5 件

O(n)で処理できるか

問題 3：設定ファイルの差分影響範囲を求めよ
テスト観点

グラフ探索

サイクル耐性

重複排除

複数変更キー

公開テストケース
TC3-1：単独キー
dependencies = []
changed_keys = ["A"]
期待値: {"A"}

TC3-2：直線依存
A -> B -> C
changed_keys = ["A"]
期待値: {"A","B","C"}

非公開テストケース
TC3-H1：サイクルあり
A -> B -> C -> A
changed_keys = ["B"]
期待値: {"A","B","C"}

TC3-H2：複数開始点
changed_keys = ["A","D"]
依存が部分的に重なる

TC3-H3：巨大グラフ

ノード数 10^5

DFS/BFS のスタック・メモリ耐性

問題 4：レート制限付きジョブスケジューラ
テスト観点

同時実行数制御

時間シミュレーション

到着待ち処理

ヒープ利用

公開テストケース
TC4-1：単一ジョブ
jobs = [(0,5)]
max_concurrency = 1
期待値: 5

TC4-2：並列可能
jobs = [(0,5),(0,3)]
max_concurrency = 2
期待値: 5

非公開テストケース
TC4-H1：到着待ちあり

次のジョブが空きを待つケース

TC4-H2：max_concurrency = 1

実質キュー処理

TC4-H3：大量ジョブ

10^5 件

O(n log n) 想定

問題 5：大量データに対する部分集計クエリ
テスト観点

セグメントツリー設計

update / query 混在

負数処理

パフォーマンス

公開テストケース
TC5-1：全正数
[1,2,3,4]
query(0,3)
期待値: 10

TC5-2：全負数
[-5,-1,-3]
期待値: -1

非公開テストケース
TC5-H1：update 連打

update 2×10^5 回

query 最小限

TC5-H2：query 連打

update 少、query 多

木の再計算ミス検出

TC5-H3：正負混在ランダム

最大部分和ロジック検証

テスト全体の完了条件

公開テスト：全通過

非公開テスト：全通過

実行時間：制限内

メモリ：極端なリークなし
